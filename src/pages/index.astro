---
import { CommandMenu } from "@/components/command-menu";
import { RESUME_DATA } from "@/data/resume-data";
import { WorkExperience } from "@/components/WorkExperience";
import { Projects } from "@/components/Projects";
import { Education } from "@/components/Education";
import { Summary } from "@/components/Summary";
import { Skills } from "@/components/Skills";
import OptimizedHeader from "@/components/OptimizedHeader.astro";
import Layout from "../layouts/Layout.astro";

/**
 * Transform social links for command menu
 */
function getCommandMenuLinks() {
  const links = [];

  if (RESUME_DATA.personalWebsiteUrl) {
    links.push({
      url: RESUME_DATA.personalWebsiteUrl,
      title: "Personal Website",
    });
  }

  return [
    ...links,
    ...RESUME_DATA.contact.social.map((socialMediaLink) => ({
      url: socialMediaLink.url,
      title: socialMediaLink.name,
    })),
  ];
}

export const prerender = true;
---

<Layout title={`${RESUME_DATA.name} - Resume`} description={RESUME_DATA.about}>
  <main
    class="container relative mx-auto scroll-my-12 overflow-auto p-4 print:p-11 md:p-16"
    id="main-content"
  >
    <div class="sr-only">
      <h1>{RESUME_DATA.name}'s Resume</h1>
    </div>

    <section
      class="mx-auto w-full max-w-2xl space-y-8 bg-white print:space-y-4"
      aria-label="Resume Content"
    >
      <OptimizedHeader />

      <div class="space-y-8 print:space-y-4">
        <Summary summary={RESUME_DATA.summary} />

        <WorkExperience work={RESUME_DATA.work} />

        <Projects projects={RESUME_DATA.projects} />

        <Education education={RESUME_DATA.education} />

        <Skills skills={[]} />
      </div>
    </section>

    <nav class="print:hidden" aria-label="Quick navigation">
      <CommandMenu links={getCommandMenuLinks()} />
    </nav>
  </main>
</Layout>
